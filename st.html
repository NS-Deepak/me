<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ops Monitor V2 - Professional Build</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { margin: 0; background: #050505; color: #3780f6; font-family: 'Courier New', monospace; overflow: hidden; }
        .hud-overlay { pointer-events: none; position: absolute; inset: 0; z-index: 100; padding: 2rem; display: flex; flex-direction: column; justify-content: space-between; }
        .crt-lines { position: absolute; inset: 0; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06)); background-size: 100% 2px, 3px 100%; pointer-events: none; z-index: 150; }
    </style>
</head>
<body>
    <div class="crt-lines"></div>
    
    <div class="hud-overlay uppercase text-[10px] tracking-widest">
        <div class="flex justify-between items-start">
            <div class="border-l-2 border-primary pl-4">
                <h1 class="text-xl font-bold">Ops_Monitor_V2</h1>
                <p class="opacity-50">Targeting: Sector 7G</p>
            </div>
            <div class="bg-primary/10 border border-primary px-4 py-2">
                Sat_Uplink: <span id="uplink-status" class="text-white">Active</span>
            </div>
        </div>
        
        <div class="flex justify-between items-end">
            <div id="telemetry-log" class="space-y-1 opacity-60">
                <p>> Syncing orbital nodes...</p>
            </div>
            <div class="text-right">
                <p>Loc: Bangalore, India</p>
                <p>Lat: 12.9716 / Lng: 77.5946</p>
            </div>
        </div>
    </div>

    <div id="canvas-container" class="w-full h-screen"></div>

    <script>
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        container.appendChild(renderer.domElement);

        // 1. EARTH GROUP (Main Sphere + Mesh Overlay)
        const earthGroup = new THREE.Group();
        
        // Solid Core
        const core = new THREE.Mesh(
            new THREE.SphereGeometry(2, 64, 64),
            new THREE.MeshBasicMaterial({ color: 0x020202 })
        );
        earthGroup.add(core);

        // Blue Wireframe Mesh (Matching your reference)
        const wireframe = new THREE.Mesh(
            new THREE.SphereGeometry(2.02, 40, 40),
            new THREE.MeshBasicMaterial({ color: 0x3780f6, wireframe: true, transparent: true, opacity: 0.15 })
        );
        earthGroup.add(wireframe);
        scene.add(earthGroup);

        // 2. SATELLITE SYSTEM
        const satGroup = new THREE.Group();
        
        // Small satellite box
        const satBody = new THREE.Mesh(
            new THREE.BoxGeometry(0.1, 0.1, 0.15),
            new THREE.MeshBasicMaterial({ color: 0xffffff })
        );
        
        // Satellite Solar Panels
        const panelGeom = new THREE.PlaneGeometry(0.3, 0.1);
        const panelMat = new THREE.MeshBasicMaterial({ color: 0x3780f6, side: THREE.DoubleSide, transparent: true, opacity: 0.5 });
        const leftPanel = new THREE.Mesh(panelGeom, panelMat);
        leftPanel.position.x = -0.2;
        const rightPanel = new THREE.Mesh(panelGeom, panelMat);
        rightPanel.position.x = 0.2;
        
        satBody.add(leftPanel);
        satBody.add(rightPanel);
        
        // Signal Beam (Points toward Earth)
        const beamGeom = new THREE.CylinderGeometry(0.01, 0.2, 4, 32, 1, true);
        const beamMat = new THREE.MeshBasicMaterial({ color: 0x3780f6, transparent: true, opacity: 0.2 });
        const beam = new THREE.Mesh(beamGeom, beamMat);
        beam.position.y = -2; // Extend toward Earth
        satBody.add(beam);

        satGroup.add(satBody);
        scene.add(satGroup);

        camera.position.z = 8;

        // 3. ANIMATION LOGIC
        function animate() {
            requestAnimationFrame(animate);
            
            const time = Date.now() * 0.001;
            
            // Rotate Earth
            earthGroup.rotation.y += 0.001;

            // Orbit Logic (True 3D Ellipse)
            // This ensures the satellite moves behind and in front of the sphere correctly
            const orbitRadiusX = 4.5;
            const orbitRadiusZ = 3.5;
            satGroup.position.x = Math.cos(time * 0.5) * orbitRadiusX;
            satGroup.position.z = Math.sin(time * 0.5) * orbitRadiusZ;
            satGroup.position.y = Math.sin(time * 0.2) * 1.5; // Slight vertical tilt
            
            // Make satellite look at the Earth center
            satBody.lookAt(0, 0, 0);
            satBody.rotation.x += Math.PI / 2; // Adjust orientation

            // Random signal flicker
            beam.visible = Math.random() > 0.1;

            renderer.render(scene, camera);
        }

        // Handle Window Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Telemetry Update
        setInterval(() => {
            const log = document.getElementById('telemetry-log');
            const entry = document.createElement('p');
            entry.innerText = `> data_burst_${Math.floor(Math.random()*9999)} received`;
            log.appendChild(entry);
            if(log.children.length > 5) log.removeChild(log.firstChild);
        }, 2000);

        animate();
    </script>
</body>
</html>